# π§­ Querydsl: νƒ€μ… μ•μ •μ μΈ λ™μ  μΏΌλ¦¬

> **ν•΄λ‹Ή ν•™μµμ λ©ν‘:** μλ°” μ½”λ“λ΅ μΏΌλ¦¬λ¥Ό μ‘μ„±ν•μ—¬ λ¬Έλ²• μ¤λ¥λ¥Ό μ»΄νμΌ λ‹¨κ³„μ—μ„ λ°©μ§€ν•κ³ , μ΅°κ±΄μ— λ”°λΌ μ‹¤ν–‰λλ” λ™μ  μΏΌλ¦¬ μ‘μ„± λ¥λ ¥μ„ κ°–μ¶”μ–΄μ•Ό ν•¨.

---

## π›£οΈ Learning Roadmap

```mermaid
graph TD
    classDef point fill:#f9f,stroke:#333,stroke-width:2px;
    classDef basic fill:#e1f5fe,stroke:#01579b,stroke-width:1px;
    classDef core fill:#fff3e0,stroke:#e65100,stroke-width:1px;

    Start((μ‹μ‘)):::point --> Step1["1. Querydsl μ„¤μ •κ³Ό Q-Type μƒμ„±"]:::basic
    Step1 --> Step2["2. κΈ°λ³Έ Q-Type ν™μ© λ° κ²€μƒ‰ μ΅°κ±΄"]:::basic
    Step2 --> Step3["3. κ²°κ³Ό μ΅°ν (fetch, fetchOne, fetchResults)"]:::basic
    Step3 --> Step4["4. λ™μ  μΏΌλ¦¬ ν•΄κ²° (BooleanBuilder vs BooleanExpression)"]:::core
    Step4 --> Step5["5. ν”„λ΅μ μ…κ³Ό κ²°κ³Ό λ°ν™ (DTO μ΅°ν)"]:::core
    Step5 --> Step6["6. Spring Data JPAμ™€ Querydsl μ—°λ™"]:::core
    Step6 --> Finish((λ„μ°©)):::point

    K1[μ»΄ν¬λ„νΈ μ¤μΊ”μ„ ν†µν• μΏΌλ¦¬ μ „μ© κ°μ²΄ μƒμ„±]:::basic --- Step1
    K2[λ©”μ„λ“ μ²΄μ΄λ‹ κΈ°λ°μ κ°€λ…μ„± λ†’μ€ μΏΌλ¦¬]:::core --- Step4

```

---

## π” μƒμ„Έ ν•™μµ κ°€μ΄λ“

### **1. Q-Type μƒμ„± λ° ν™κ²½ μ„¤μ •**

* **λ‚΄μ©:** APT(Annotation Processing Tool)κ°€ μ—”ν‹°ν‹° ν΄λμ¤λ¥Ό λ¶„μ„ν•μ—¬ μΏΌλ¦¬μ© κ°μ²΄μΈ **Q-Type** ν΄λμ¤λ¥Ό μƒμ„±ν•λ” μ›λ¦¬λ¥Ό μ΄ν•΄ν•΄μ•Ό ν•¨.
* **ν•µμ‹¬:** λΉλ“ λ„κµ¬(Gradle/Maven) μ„¤μ •μ„ ν†µν•΄ μ»΄νμΌ μ‹μ μ— Q-Type νμΌλ“¤μ΄ μ¬λ°”λ¥Έ κ²½λ΅μ— μƒμ„±λλ„λ΅ κ΄€λ¦¬ν•΄μ•Ό ν•¨.

### **2. κΈ°λ³Έ λ¬Έλ²•κ³Ό λ©”μ„λ“ μ²΄μ΄λ‹**

* **λ‚΄μ©:** `select`, `from`, `where`, `orderBy`, `groupBy` λ“± SQLκ³Ό μ μ‚¬ν• λ©”μ„λ“λ¥Ό μ‚¬μ©ν•μ—¬ μΏΌλ¦¬λ¥Ό κµ¬μ„±ν•λ” λ²•μ„ μµν€μ•Ό ν•¨.
* **Why?** λ¬Έμμ—΄μ΄ μ•„λ‹ μλ°” μ½”λ“λ΅ μ‘μ„±ν•λ―€λ΅ μ¤νƒ€λ΅ μΈν• λ°νƒ€μ„ μ—λ¬λ¥Ό λ°©μ§€ν•κ³  IDEμ μλ™ μ™„μ„± κΈ°λ¥μ„ μ κ·Ή ν™μ©ν•΄μ•Ό ν•¨.

### **3. λ™μ  μΏΌλ¦¬ μ²λ¦¬ μ „λµ**

* **λ‚΄μ©:** `BooleanBuilder`λ¥Ό μ‚¬μ©ν•λ” λ°©μ‹κ³Ό `BooleanExpression`(Where λ‹¤μ¤‘ νλΌλ―Έν„°)μ„ μ‚¬μ©ν•λ” λ°©μ‹μ μ°¨μ΄λ¥Ό νμ•…ν•΄μ•Ό ν•¨.
* **ν•µμ‹¬:** μ‹¤λ¬΄μ—μ„λ” μΏΌλ¦¬μ μ¬μ‚¬μ©μ„±κ³Ό κ°€λ…μ„±μ„ λ†’μ΄κΈ° μ„ν•΄ **BooleanExpression**μ„ λ°ν™ν•λ” λ©”μ„λ“ λ¶„λ¦¬ λ°©μ‹μ„ μ°μ„ μ μΌλ΅ κ³ λ ¤ν•΄μ•Ό ν•¨.

### **4. ν”„λ΅μ μ…κ³Ό DTO μ΅°ν**

* **λ‚΄μ©:** μ—”ν‹°ν‹° μ „μ²΄κ°€ μ•„λ‹ ν•„μ”ν• ν•„λ“λ§ λ½‘μ•„λ‚΄λ” ν”„λ΅μ μ…(Projection) κΈ°λ²•μ„ ν•™μµν•΄μ•Ό ν•¨.
* **Why?** μ„±λ¥ μµμ ν™”λ¥Ό μ„ν•΄ DBμ—μ„ ν•„μ”ν• λ°μ΄ν„°λ§ μ΅°νν•΄μ•Ό ν•λ©°, `@QueryProjection`μ„ μ‚¬μ©ν•μ—¬ κ²°κ³Ό λ°μ΄ν„°λ¥Ό DTOλ΅ μ•μ „ν•κ² λ³€ν™ν•λ” λ²•μ„ μ™μ§€ν•΄μ•Ό ν•¨.

### **5. Spring Data JPA μ—°λ™ λ° μ‚¬μ©μ μ •μ λ¦¬ν¬μ§€ν† λ¦¬**

* **λ‚΄μ©:** `JpaRepository` μΈν„°νμ΄μ¤μ™€ Querydsl κµ¬ν„μ²΄λ¥Ό κ²°ν•©ν•λ” μ‚¬μ©μ μ •μ λ¦¬ν¬μ§€ν† λ¦¬ κµ¬μ΅°(Custom Repository)λ¥Ό κµ¬μ¶•ν•΄μ•Ό ν•¨.
* **μƒν™©:** λ³µμ΅ν• ν†µκ³„ μΏΌλ¦¬λ‚ λ™μ  κ²€μƒ‰μ΄ ν•„μ”ν• κΈ°λ¥μ€ Querydsl μ „μ© λ¦¬ν¬μ§€ν† λ¦¬μ— λ¶„λ¦¬ν•μ—¬ κ΄€λ¦¬ν•¨μΌλ΅μ¨ μ•„ν‚¤ν…μ²μ μ μ—°μ„±μ„ ν™•λ³΄ν•΄μ•Ό ν•¨.

---

## π”— κ΄€λ ¨ μ°Έκ³  μλ£

* [Querydsl κ³µμ‹ μ‚¬μ΄νΈ - Reference Guide](http://querydsl.com/static/querydsl/latest/reference/html/)
* [μ‹¤μ „! Querydsl (μΈν”„λ° - κΉ€μν• κ°•μΆ)] - μ‹¤λ¬΄ ν™μ©μ„ μ„ν• μµκ³ μ κ°€μ΄λ“