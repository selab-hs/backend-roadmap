## 

λ΅λ“ λ°Έλ°μ‹±μ€ λ¶€ν•λ¥Ό λ¶„μ‚°ν•λ” κΈ°μ μ΄λ©°, κ³ κ°€μ©μ„±μ€ μ‹μ¤ν…μ΄ μ¥μ•  μ—†μ΄ μ§€μ†μ μΌλ΅ μ„λΉ„μ¤λ  μ μλ„λ΅ μ„¤κ³„ν•λ” μ „λµμ„.

```mermaid
graph TD
    %% μ¤νƒ€μΌ μ •μ
    classDef point fill:#f9f,stroke:#333,stroke-width:2px;
    classDef basic fill:#e1f5fe,stroke:#01579b,stroke-width:1px;
    classDef algorithm fill:#fff3e0,stroke:#e65100,stroke-width:1px;
    classDef ha fill:#ffebee,stroke:#c62828,stroke-width:1px;

    Start((μ‹μ‘)):::point --> L4L7Diff["1. L4 vs L7 λ΅λ“ λ°Έλ°μ„ μ°¨μ΄"]:::basic
    L4L7Diff --> Algorithms["2. λ¶€ν• λ¶„μ‚° μ•κ³ λ¦¬μ¦ (Round Robin, Least Conn λ“±)"]:::algorithm
    Algorithms --> HealthCheck["3. μƒνƒ ν™•μΈ (Health Check) λ©”μ»¤λ‹μ¦"]:::basic
    HealthCheck --> Persistence["4. μ„Έμ… μ μ§€ (Sticky Session) μ „λµ"]:::algorithm
    Persistence --> HADesign["5. κ³ κ°€μ©μ„± μ„¤κ³„ (Active-Active, Active-Standby)"]:::ha
    HADesign --> GSLB["6. κ΄‘μ—­ λ¶€ν• λ¶„μ‚° (GSLB)"]:::ha
    Finish((λ„μ°©)):::point

    subgraph "ν•µμ‹¬ ν•™μµ ν¬μΈνΈ"
    L4L7Diff -.-> K1["ν¨ν‚· λ λ²¨ λ¶„μ‚° vs μ»¨ν…μΈ  κΈ°λ° λ¶„μ‚°"]
    Persistence -.-> K2["Stateless μ•„ν‚¤ν…μ²μ™€ μ„Έμ… λ¶μΌμΉ ν•΄κ²°"]
    HADesign -.-> K3["SPOF(λ‹¨μΌ μ¥μ• μ ) μ κ±°μ™€ μ΄μ¤‘ν™”"]
    en
```

---

## π” λ‹¨κ³„λ³„ ν•„μ μν–‰ μ§€μΉ¨

### 1. L4μ™€ L7 λ΅λ“ λ°Έλ°μ„μ κ²°μ •μ  μ°¨μ΄λ¥Ό λ¶„μ„ν•  κ²ƒ

- **L4 (Transport Layer):** IPμ™€ ν¬νΈ λ²νΈ κΈ°λ°μ λ¶€ν• λ¶„μ‚°. λ°μ΄ν„° λ‚΄μ©μ„ λ³΄μ§€ μ•μ•„ μ†λ„κ°€ λΉ λ¥΄μ§€λ§ μ„¬μ„Έν• μ μ–΄κ°€ μ–΄λ ¤μ›€.
- **L7 (Application Layer):** HTTP ν—¤λ”, μΏ ν‚¤, URL κ²½λ΅ κΈ°λ°μ λ¶„μ‚°. νΉμ • κ²½λ΅(`.../api/v1`)λ” νΉμ • μ„λ²„λ΅ λ³΄λ‚΄λ” λ“± μ§€λ¥μ μΈ μ²λ¦¬κ°€ κ°€λ¥ν•μ§€λ§ μ¤λ²„ν—¤λ“κ°€ νΌ.
- μ‹¤μ  μΈν”„λΌμ—μ„ L4 λ’¤μ— L7(Nginx, HAProxy)μ΄ κ³„μΈµμ μΌλ΅ λ°°μΉλλ” κµ¬μ΅°λ¥Ό μ΄ν•΄ν•  κ²ƒ.

### 2. μ£Όμ” λ¶€ν• λ¶„μ‚° μ•κ³ λ¦¬μ¦μ„ μƒν™©λ³„λ΅ μ μ©ν•  κ²ƒ

- **Round Robin:** μ„λ²„ μ„±λ¥μ΄ λ™μΌν•  λ• μμ°¨μ μΌλ΅ λ°°λ¶„.
- **Weighted Round Robin:** μ„λ²„ μ‚¬μ–‘μ— λ”°λΌ κ°€μ¤‘μΉλ¥Ό λ‘μ–΄ λ°°λ¶„.
- **Least Connection:** ν„μ¬ μ—°κ²° μκ°€ κ°€μ¥ μ μ€ μ„λ²„λ΅ μ „λ‹¬ (μ„Έμ…μ΄ κΈ΄ μ„λΉ„μ¤μ— μ λ¦¬).
- **IP Hash:** ν΄λΌμ΄μ–ΈνΈμ IPλ¥Ό ν•΄μ‹±ν•μ—¬ ν•­μƒ κ°™μ€ μ„λ²„λ΅ μ—°κ²° (μΉν™”μ„± μ μ§€).

### 3. μƒνƒ ν™•μΈ(Health Check)μ μ¤‘μ”μ„±μ„ μΈμ§€ν•  κ²ƒ

- λ΅λ“ λ°Έλ°μ„κ°€ λ’¤μ½ μ„λ²„(Real Server)μ μƒμ΅΄ μ—¬λ¶€λ¥Ό μ–΄λ–»κ² νλ‹¨ν•λ”μ§€ ν•™μµν•  κ²ƒ.
- L3(ICMP), L4(TCP Handshake), L7(HTTP Status Code) μμ¤€μ ν—¬μ¤ μ²΄ν¬ μ°¨μ΄λ¥Ό μ΄ν•΄ν•΄μ•Ό ν•¨.
- λΉ„μ •μƒ μ„λ²„λ¥Ό μ μ™Έ(Exclude)ν•κ³  λ³µκµ¬ μ‹ μλ™μΌλ΅ ν¬μ…(Include)ν•λ” ν”„λ΅μ„Έμ¤λ¥Ό νμ•…ν•  κ²ƒ.

### 4. μ„Έμ… λ¶μΌμΉ ν•΄κ²°κ³Ό Sticky Sessionμ„ ν•™μµν•  κ²ƒ

- ν΄λΌμ΄μ–ΈνΈκ°€ λ§¤λ² λ‹¤λ¥Έ μ„λ²„μ— μ ‘μ†ν•  λ• λ°μƒν•λ” μ„Έμ… μ •λ³΄ μ μ‹¤ λ¬Έμ λ¥Ό νμ•…ν•  κ²ƒ.
- νΉμ • μ„λ²„μ— κ³ μ •ν•λ” **Sticky Session**κ³Ό λ¨λ“  μ„λ²„κ°€ μ„Έμ…μ„ κ³µμ ν•λ” **Session Clustering(Redis λ“±)**μ μ¥λ‹¨μ μ„ λΉ„κµν•  κ²ƒ.

### 5. κ³ κ°€μ©μ„±(HA)μ„ μ„ν• μ΄μ¤‘ν™” μ„¤κ³„λ¥Ό κµ¬μ¶•ν•  κ²ƒ

- λ΅λ“ λ°Έλ°μ„ μμ²΄κ°€ μ£½λ” μƒν™©(**SPOF: Single Point of Failure**)μ„ λ§‰κΈ° μ„ν• μ „λµμ„ μλ¦½ν•  κ²ƒ.
- **Active-Standby:** ν•λ‚κ°€ μ£½μΌλ©΄ λ°±μ—…μ΄ λ°”λ΅ ν¬μ…λλ” λ°©μ‹ (VRRP ν”„λ΅ν† μ½ λ“±).
- **Active-Active:** λ‘ λ€ μ΄μƒμ΄ λ™μ‹μ— νΈλν”½μ„ μ²λ¦¬ν•λ©° μ„λ΅λ¥Ό κ°μ‹ν•λ” λ°©μ‹.

### 6. GSLB(Global Server Load Balancing)μ κ°λ…μ„ ν™•μ¥ν•  κ²ƒ

- μ—¬λ¬ λ°μ΄ν„° μ„Όν„°λ‚ ν΄λΌμ°λ“ λ¦¬μ „(Region) κ°„μ λ¶€ν•λ¥Ό μ–΄λ–»κ² λ¶„μ‚°ν•λ”μ§€ μ΄ν•΄ν•  κ²ƒ.
- DNS κΈ°λ°μΌλ΅ μ‚¬μ©μμ™€ κ°€μ¥ κ°€κΉμ΄ μ„λ²„ IPλ¥Ό λ°ν™ν•λ” μ›λ¦¬λ¥Ό ν•™μµν•  κ²ƒ.
